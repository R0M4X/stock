<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Gesti√≥n - Inventario & Ventas</title>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
color: #333;
}

/* Login Styles */
.login-container {
display: flex;
align-items: center;
justify-content: center;
min-height: 100vh;
padding: 20px;
}

.login-card {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(20px);
border-radius: 20px;
padding: 40px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
width: 100%;
max-width: 400px;
text-align: center;
}

.login-logo {
font-size: 3em;
margin-bottom: 10px;
}

.login-title {
color: #4a5568;
margin-bottom: 30px;
font-size: 2em;
}

.login-form {
display: flex;
flex-direction: column;
gap: 20px;
}

.login-input {
padding: 15px;
border: 2px solid #e2e8f0;
border-radius: 10px;
font-size: 16px;
transition: all 0.3s ease;
}

.login-input:focus {
border-color: #667eea;
outline: none;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.login-btn {
padding: 15px;
background: linear-gradient(45deg, #667eea, #764ba2);
color: white;
border: none;
border-radius: 10px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}

.login-btn:hover {
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
}

.login-btn:disabled {
opacity: 0.6;
cursor: not-allowed;
transform: none;
}

.login-switch {
margin-top: 20px;
color: #667eea;
cursor: pointer;
text-decoration: underline;
}

.forgot-password {
margin-top: 10px;
color: #e53e3e;
cursor: pointer;
text-decoration: underline;
font-size: 14px;
}

/* Main App Styles */
.app-container {
display: none;
}

.container {
max-width: 1400px;
margin: 0 auto;
padding: 20px;
}

.header {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 15px;
padding: 20px;
margin-bottom: 30px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
display: flex;
justify-content: space-between;
align-items: center;
}

.header-left h1 {
color: #4a5568;
margin-bottom: 5px;
font-size: 2.5em;
}

.header-right {
display: flex;
align-items: center;
gap: 15px;
}

.user-info {
display: flex;
align-items: center;
gap: 10px;
padding: 10px 15px;
background: rgba(102, 126, 234, 0.1);
border-radius: 25px;
}

.logout-btn {
padding: 8px 15px;
background: #e53e3e;
color: white;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 14px;
transition: all 0.3s ease;
}

.logout-btn:hover {
background: #c53030;
transform: translateY(-1px);
}

.nav-tabs {
display: flex;
gap: 10px;
margin-bottom: 30px;
justify-content: center;
flex-wrap: wrap;
}

.nav-tab {
padding: 12px 25px;
background: rgba(255, 255, 255, 0.9);
border: none;
border-radius: 25px;
cursor: pointer;
font-size: 16px;
font-weight: 500;
transition: all 0.3s ease;
backdrop-filter: blur(10px);
}

.nav-tab:hover {
background: rgba(255, 255, 255, 1);
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.nav-tab.active {
background: #667eea;
color: white;
}

.section {
display: none;
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(10px);
border-radius: 15px;
padding: 30px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.section.active {
display: block;
}

.form-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 20px;
margin-bottom: 25px;
}

.form-group {
display: flex;
flex-direction: column;
}

.form-group label {
margin-bottom: 8px;
font-weight: 500;
color: #4a5568;
}

.form-group input,
.form-group select,
.form-group textarea {
padding: 12px;
border: 2px solid #e2e8f0;
border-radius: 8px;
font-size: 16px;
transition: all 0.3s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
border-color: #667eea;
outline: none;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
transform: scale(1.02);
}

.btn {
padding: 12px 25px;
border: none;
border-radius: 8px;
font-size: 16px;
font-weight: 500;
cursor: pointer;
transition: all 0.3s ease;
display: inline-flex;
align-items: center;
gap: 8px;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
color: #333;
}

/* Estilos para la Pantalla de Carga */
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Adaptado al fondo del login */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 1;
    transition: opacity 0.5s ease-out;
}
#loading-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}


/* Login Styles */
.login-container {
display: flex;
align-items: center;
justify-content: center;
min-height: 100vh;
padding: 20px;
}

.login-card {
background: rgba(255, 255, 255, 0.95);
backdrop-filter: blur(20px);
border-radius: 20px;
padding: 40px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
width: 100%;
max-width: 400px;
text-align: center;
}

.btn:hover {
transform: translateY(-2px);
}

.btn-primary {
background: linear-gradient(45deg, #667eea, #764ba2);
color: white;
box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.btn-primary:hover {
box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.btn-success {
background: linear-gradient(45deg, #48bb78, #38a169);
color: white;
box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
}

.btn-warning {
background: linear-gradient(45deg, #ed8936, #dd6b20);
color: white;
box-shadow: 0 4px 15px rgba(237, 137, 54, 0.3);
}

.btn-danger {
background: linear-gradient(45deg, #e53e3e, #c53030);
color: white;
box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);
}

.btn-info {
background: linear-gradient(45deg, #3182ce, #2b77cb);
color: white;
box-shadow: 0 4px 15px rgba(49, 130, 206, 0.3);
}

.table-container {
overflow-x: auto;
margin-top: 30px;
border-radius: 12px;
box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

table {
width: 100%;
border-collapse: collapse;
background: white;
}

th, td {
padding: 15px;
text-align: left;
border-bottom: 1px solid #e2e8f0;
}

th {
background: #f7fafc;
font-weight: 600;
color: #4a5568;
position: sticky;
top: 0;
}

tr:hover {
background: #f7fafc;
transform: scale(1.01);
transition: all 0.2s ease;
}

.stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
margin-bottom: 30px;
}

.stat-card {
background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
backdrop-filter: blur(10px);
border-radius: 15px;
padding: 25px;
text-align: center;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
transition: transform 0.3s ease;
}

.stat-card:hover {
transform: translateY(-5px) scale(1.05);
}

.stat-value {
font-size: 2.5em;
font-weight: bold;
color: #667eea;
margin-bottom: 10px;
}

.stat-label {
color: #4a5568;
font-weight: 500;
}

.search-box {
width: 100%;
max-width: 400px;
margin-bottom: 20px;
padding: 12px 20px;
border: 2px solid #e2e8f0;
border-radius: 25px;
font-size: 16px;
transition: all 0.3s ease;
}

.search-box:focus {
border-color: #667eea;
outline: none;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
transform: scale(1.05);
}

.alert {
padding: 15px;
border-radius: 8px;
margin: 15px 0;
font-weight: 500;
animation: slideIn 0.3s ease;
}

@keyframes slideIn {
from {
opacity: 0;
transform: translateY(-20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

.alert-success {
background: #c6f6d5;
color: #22543d;
border: 1px solid #9ae6b4;
}

.alert-error {
background: #fed7d7;
color: #742a2a;
border: 1px solid #fc8181;
}

.alert-info {
background: #bee3f8;
color: #2a4365;
border: 1px solid #90cdf4;
}

.modal {
display: none;
position: fixed;
z-index: 1000;
left: 0;
top: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.5);
backdrop-filter: blur(5px);
}

.modal-content {
background: white;
margin: 5% auto;
padding: 30px;
border-radius: 15px;
width: 90%;
max-width: 600px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
animation: modalSlideIn 0.3s ease;
max-height: 80vh;
overflow-y: auto;
}

@keyframes modalSlideIn {
from {
opacity: 0;
transform: translateY(-50px) scale(0.9);
}
to {
opacity: 1;
transform: translateY(0) scale(1);
}
}

.close {
color: #aaa;
float: right;
font-size: 28px;
font-weight: bold;
cursor: pointer;
margin-top: -10px;
transition: color 0.3s ease;
}

.close:hover {
color: #000;
transform: scale(1.1);
}

.low-stock {
background: #fed7d7 !important;
animation: pulse 2s infinite;
}

.out-of-stock {
background: #fbb6ce !important;
animation: shake 0.5s ease-in-out;
}

@keyframes pulse {
0%, 100% { opacity: 1; }
50% { opacity: 0.7; }
}

@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-5px); }
75% { transform: translateX(5px); }
}

.product-actions {
display: flex;
gap: 5px;
flex-wrap: wrap;
}

.btn-small {
padding: 6px 12px;
font-size: 14px;
}

.form-actions {
display: flex;
gap: 15px;
margin-top: 20px;
flex-wrap: wrap;
}

.quick-add-form {
background: linear-gradient(135deg, #f7fafc, #edf2f7);
border-radius: 12px;
padding: 25px;
margin-bottom: 30px;
border: 2px dashed #cbd5e0;
transition: all 0.3s ease;
}

.quick-add-form:hover {
border-color: #667eea;
background: linear-gradient(135deg, #ebf8ff, #bee3f8);
}

.category-tag {
display: inline-block;
background: #667eea;
color: white;
padding: 4px 12px;
border-radius: 15px;
font-size: 12px;
margin: 2px;
}

.profit-positive {
color: #38a169;
font-weight: bold;
}

.profit-negative {
color: #e53e3e;
font-weight: bold;
}

.export-buttons {
display: flex;
gap: 10px;
flex-wrap: wrap;
margin-bottom: 20px;
}

/* Barcode Scanner Input in Sales */
.barcode-scan-input {
padding: 15px;
border: 3px dashed #667eea;
border-radius: 10px;
font-size: 18px;
text-align: center;
margin-bottom: 25px;
font-family: monospace;
width: 100%;
}
.barcode-scan-input:focus {
border-style: solid;
}


/* Price Update Modal */
.price-update-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
margin-bottom: 20px;
}

.price-preview {
max-height: 300px;
overflow-y: auto;
border: 1px solid #e2e8f0;
border-radius: 8px;
}

.price-preview table {
margin: 0;
}

.price-change {
background: #fff3cd;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.sync-status {
padding: 5px 10px;
border-radius: 20px;
font-size: 12px;
font-weight: 500;
margin-left: 10px;
}

.sync-success {
background: #c6f6d5;
color: #22543d;
}

.sync-error {
background: #fed7d7;
color: #742a2a;
}

.sync-pending {
background: #fef5e7;
color: #744210;
}

@media (max-width: 768px) {
.container {
padding: 10px;
}

.nav-tabs {
flex-direction: column;
}

.nav-tab {
width: 100%;
}

.form-grid {
grid-template-columns: 1fr;
}

.header {
flex-direction: column;
gap: 15px;
text-align: center;
}

.header h1 {
font-size: 2em;
}

.form-actions {
flex-direction: column;
}

.btn {
width: 100%;
justify-content: center;
}

.export-buttons {
flex-direction: column;
}

.header-right {
flex-direction: column;
gap: 10px;
}
}
</style>
</head>
<body>
        <!-- Pantalla de Carga con SVG animado -->
<div id="loading-overlay">
    <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)">
        <!-- C√≠rculo -->
        <circle cx="100" cy="100" r="90" stroke="#FFFFFF" stroke-width="4" fill="none" stroke-dasharray="565" stroke-dashoffset="565">
            <animate attributeName="stroke-dashoffset" from="565" to="0" dur="1.5s" begin="0.5s" fill="freeze" />
        </circle>
        <!-- Texto MSS -->
        <text x="50%" y="50%" text-anchor="middle" dy=".35em" font-size="60" font-family="Inter, sans-serif" font-weight="bold" fill="#FFFFFF" opacity="0">
            MSS
            <animate attributeName="opacity" from="0" to="1" dur="1.5s" begin="1s" fill="freeze" />
        </text>
    </svg>
</div>
<div class="loading" id="loadingSpinner">
<div class="spinner"></div>
</div>

<div class="login-container" id="loginScreen">
<div class="login-card">
<div class="login-logo">üè™</div>
<h1 class="login-title">Sistema de Gesti√≥n</h1>
<form class="login-form" id="loginForm">
<input type="email" class="login-input" id="loginEmail" placeholder="Email" required>
<input type="password" class="login-input" id="loginPassword" placeholder="Contrase√±a" required>
<button type="submit" class="login-btn" id="loginBtn">Iniciar Sesi√≥n</button>
</form>
<div class="login-switch" onclick="toggleAuthMode()">¬øNo tienes cuenta? Reg√≠strate</div>
<div class="forgot-password" onclick="resetPassword()">¬øOlvidaste tu contrase√±a?</div>
</div>
</div>

<div class="app-container" id="mainApp">
<div class="container">
<header class="header">
<div class="header-left">
<h1>Sistema de Gesti√≥n Empresarial</h1>
<p>Sistema integral para gesti√≥n de inventario, ventas y an√°lisis</p>
</div>
<div class="header-right">
<div class="user-info">
<span>üë§</span>
<span id="userEmail">usuario@ejemplo.com</span>
<div class="sync-status" id="syncStatus">Sincronizado</div>
</div>
<button class="logout-btn" onclick="logout()">Cerrar Sesi√≥n</button>
</div>
</header>

<nav class="nav-tabs">
<button class="nav-tab active" onclick="showSection('dashboard')">üìä Dashboard</button>
<button class="nav-tab" onclick="showSection('categories')">üè∑Ô∏è Categor√≠as</button>
<button class="nav-tab" onclick="showSection('products')">üì¶ Productos</button>
<button class="nav-tab" onclick="showSection('sales')">üí∞ Ventas</button>
<button class="nav-tab" onclick="showSection('reports')">üìà Reportes</button>
<button class="nav-tab" onclick="showSection('settings')">‚öôÔ∏è Configuraci√≥n</button>
</nav>

<section id="dashboard" class="section active">
<h2>Dashboard - Resumen General</h2>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-value" id="totalProducts">0</div>
<div class="stat-label">Total Productos</div>
</div>
<div class="stat-card">
<div class="stat-value" id="totalCategories">0</div>
<div class="stat-label">Categor√≠as</div>
</div>
<div class="stat-card">
<div class="stat-value" id="lowStockItems">0</div>
<div class="stat-label">Stock Bajo</div>
</div>
<div class="stat-card">
<div class="stat-value" id="totalSales">$0</div>
<div class="stat-label">Ventas del D√≠a</div>
</div>
<div class="stat-card">
<div class="stat-value" id="monthlyProfit">$0</div>
<div class="stat-label">Ganancia del Mes</div>
</div>
<div class="stat-card">
<div class="stat-value" id="monthlySales">$0</div>
<div class="stat-label">Ventas del Mes</div>
</div>
</div>

<h3>Productos con Stock Bajo</h3>
<div class="table-container">
<table id="lowStockTable">
<thead>
<tr>
<th>Producto</th>
<th>Categor√≠a</th>
<th>Stock Actual</th>
<th>Stock M√≠nimo</th>
<th>C√≥digo de Barras</th>
<th>Acci√≥n</th>
</tr>
</thead>
<tbody id="lowStockTableBody">
<tr>
<td colspan="6" style="text-align: center; color: #666;">No hay productos con stock bajo</td>
</tr>
</tbody>
</table>
</div>
</section>

<section id="categories" class="section">
<h2>Gesti√≥n de Categor√≠as</h2>

<div class="quick-add-form">
<h3>Agregar Nueva Categor√≠a</h3>
<div class="form-grid">
<div class="form-group">
<label for="categoryName">Nombre de la Categor√≠a:</label>
<input type="text" id="categoryName" placeholder="Ej: Herramientas">
</div>
<div class="form-group">
<label for="categoryDescription">Descripci√≥n (opcional):</label>
<textarea id="categoryDescription" rows="3" placeholder="Descripci√≥n de la categor√≠a"></textarea>
</div>
</div>
<div class="form-actions">
<button class="btn btn-primary" onclick="addCategory()">
<span>‚ûï</span> Agregar Categor√≠a
</button>
<button class="btn btn-success" id="updateCategoryBtn" style="display:none;" onclick="updateCategory()">
<span>‚úèÔ∏è</span> Actualizar Categor√≠a
</button>
<button class="btn btn-warning" onclick="clearCategoryForm()">
<span>üßπ</span> Limpiar
</button>
</div>
</div>

<div class="export-buttons">
<button class="btn btn-info" onclick="exportCategoriesCSV()">
<span>üìÑ</span> Exportar CSV
</button>
</div>

<h3>Lista de Categor√≠as</h3>
<input type="text" class="search-box" id="categorySearch" placeholder="üîç Buscar categor√≠as..." onkeyup="searchCategories()">

<div class="table-container">
<table id="categoriesTable">
<thead>
<tr>
<th>Nombre</th>
<th>Descripci√≥n</th>
<th>Productos</th>
<th>Creada</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="categoriesTableBody">
<tr>
<td colspan="5" style="text-align: center; color: #666;">No hay categor√≠as registradas</td>
</tr>
</tbody>
</table>
</div>
</section>

<section id="products" class="section">
<h2>Gesti√≥n de Productos</h2>

<div class="quick-add-form">
<h3 id="productFormTitle">Agregar Nuevo Producto</h3>
<div class="form-grid">
<div class="form-group">
<label for="productName">Nombre del Producto: *</label>
<input type="text" id="productName" placeholder="Ej: Martillo 500gr" required>
</div>
<div class="form-group">
<label for="productCode">C√≥digo: *</label>
<input type="text" id="productCode" placeholder="Ej: MAR001" required>
</div>
<div class="form-group">
<label for="productBarcode">C√≥digo de Barras (si se deja vac√≠o, se genera uno):</label>
<input type="text" id="productBarcode" placeholder="Ej: 7891234567890">
</div>
<div class="form-group">
<label for="productCategory">Categor√≠a: *</label>
<select id="productCategory" required>
<option value="">Seleccionar categor√≠a...</option>
</select>
</div>
<div class="form-group">
<label for="productCostPrice">Precio de Costo: *</label>
<input type="number" id="productCostPrice" step="0.01" placeholder="0.00" required>
</div>
<div class="form-group">
<label for="productPrice">Precio de Venta: *</label>
<input type="number" id="productPrice" step="0.01" placeholder="0.00" required>
</div>
<div class="form-group">
<label for="productStock">Stock Inicial: *</label>
<input type="number" id="productStock" placeholder="0" required>
</div>
<div class="form-group">
<label for="productMinStock">Stock M√≠nimo:</label>
<input type="number" id="productMinStock" placeholder="5">
</div>
</div>
<div class="form-group">
<label for="productDescription">Descripci√≥n:</label>
<textarea id="productDescription" rows="3" placeholder="Descripci√≥n detallada del producto"></textarea>
</div>
<div class="form-actions">
<button class="btn btn-primary" id="addProductBtn" onclick="addProduct()">
<span>üì¶</span> Agregar Producto
</button>
<button class="btn btn-success" id="updateProductBtn" style="display:none;" onclick="updateProduct()">
<span>‚úèÔ∏è</span> Actualizar Producto
</button>
<button class="btn btn-warning" onclick="clearProductForm()">
<span>üßπ</span> Limpiar Formulario
</button>
<button class="btn btn-info" onclick="showPriceUpdateModal()">
<span>üí∞</span> Actualizar Precios
</button>
</div>
</div>

<div class="export-buttons">
<button class="btn btn-info" onclick="exportProductsCSV()">
<span>üìÑ</span> Exportar CSV
</button>
<button class="btn btn-success" onclick="showBarcodeLabelsModal()">
<span>üè∑Ô∏è</span> Generar Etiquetas
</button>
</div>

<h3>Lista de Productos</h3>
<input type="text" class="search-box" id="productSearch" placeholder="üîç Buscar productos..." onkeyup="searchProducts()">

<div class="table-container">
<table id="productsTable">
<thead>
<tr>
<th>C√≥digo</th>
<th>Nombre</th>
<th>Categor√≠a</th>
<th>P. Costo</th>
<th>P. Venta</th>
<th>Margen</th>
<th>Stock</th>
<th>C√≥digo de Barras</th>
<th>Estado</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="productsTableBody">
<tr>
<td colspan="10" style="text-align: center; color: #666;">No hay productos registrados</td>
</tr>
</tbody>
</table>
</div>
</section>

<section id="sales" class="section">
<h2>Punto de Venta</h2>
    
<input type="text" id="saleBarcodeScanInput" class="barcode-scan-input" placeholder="üõí Escanear c√≥digo de barras aqu√≠...">

<div class="form-grid">
<div class="form-group">
<label for="saleProduct">Producto:</label>
<select id="saleProduct" onchange="selectProduct()">
<option value="">Seleccionar producto...</option>
</select>
</div>
<div class="form-group">
<label for="saleQuantity">Cantidad:</label>
<input type="number" id="saleQuantity" min="1" placeholder="1" onchange="updateSaleSubtotal()">
</div>
<div class="form-group">
<label for="salePrice">Precio Unitario:</label>
<input type="number" id="salePrice" step="0.01" placeholder="0.00" onchange="updateSaleSubtotal()">
</div>
<div class="form-group">
<label for="saleSubtotal">Subtotal:</label>
<input type="number" id="saleSubtotal" step="0.01" placeholder="0.00" readonly style="background: #f7fafc;">
</div>
<div class="form-group">
<label for="customerName">Cliente:</label>
<input type="text" id="customerName" placeholder="Nombre del cliente (opcional)">
</div>
</div>

<div class="form-actions">
<button class="btn btn-primary" onclick="addToSale()">
<span>‚ûï</span> Agregar al Carrito
</button>
<button class="btn btn-warning" onclick="quickSale()">
<span>‚ö°</span> Venta R√°pida
</button>
</div>

<div style="margin-top: 30px;">
<h3>Carrito de Compras</h3>
<div class="table-container">
<table id="cartTable">
<thead>
<tr>
<th>Producto</th>
<th>Cantidad</th>
<th>Precio Unit.</th>
<th>Subtotal</th>
<th>Ganancia</th>
<th>Acci√≥n</th>
</tr>
</thead>
<tbody id="cartTableBody">
<tr>
<td colspan="6" style="text-align: center; color: #666;">Carrito vac√≠o</td>
</tr>
</tbody>
</table>
</div>

<div style="text-align: right; margin-top: 20px; background: #f7fafc; padding: 20px; border-radius: 10px;">
<div style="margin-bottom: 10px;">
<strong>Costo Total: $<span id="totalCost">0.00</span></strong>
</div>
<div style="margin-bottom: 10px;">
<strong>Ganancia Total: $<span id="totalProfit" class="profit-positive">0.00</span></strong>
</div>
<div style="margin-bottom: 20px; font-size: 1.2em;">
<strong>Total Venta: $<span id="saleTotal">0.00</span></strong>
</div>
<div class="form-actions" style="justify-content: flex-end;">
<button class="btn btn-success" onclick="completeSale()" id="completeSaleBtn" disabled>
<span>üí≥</span> Completar Venta
</button>
<button class="btn btn-warning" onclick="clearCart()">
<span>üóëÔ∏è</span> Limpiar Carrito
</button>
</div>
</div>
</div>

<div style="margin-top: 40px;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
<h3>Historial de Ventas</h3>
<button class="btn btn-info" onclick="exportSalesCSV()">
<span>üìÑ</span> Exportar CSV
</button>
</div>
<div class="table-container">
<table id="salesHistoryTable">
<thead>
<tr>
<th>Fecha</th>
<th>Cliente</th>
<th>Productos</th>
<th>Costo</th>
<th>Ganancia</th>
<th>Total</th>
<th>Acci√≥n</th>
</tr>
</thead>
<tbody id="salesHistoryTableBody">
<tr>
<td colspan="7" style="text-align: center; color: #666;">No hay ventas registradas</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>

<section id="reports" class="section">
<h2>Reportes y An√°lisis</h2>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-value" id="reportTotalSales">$0</div>
<div class="stat-label">Ventas Totales</div>
</div>
<div class="stat-card">
<div class="stat-value profit-positive" id="reportTotalProfit">$0</div>
<div class="stat-label">Ganancias Totales</div>
</div>
<div class="stat-card">
<div class="stat-value" id="reportTotalProducts">0</div>
<div class="stat-label">Productos Vendidos</div>
</div>
<div class="stat-card">
<div class="stat-value" id="reportAvgSale">$0</div>
<div class="stat-label">Venta Promedio</div>
</div>
<div class="stat-card">
<div class="stat-value" id="reportProfitMargin">0%</div>
<div class="stat-label">Margen Promedio</div>
</div>
<div class="stat-card">
<div class="stat-value" id="reportTopProduct">-</div>
<div class="stat-label">Producto + Vendido</div>
</div>
</div>

<div style="margin-top: 30px;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
<h3>Productos M√°s Vendidos</h3>
<button class="btn btn-info" onclick="exportReportsCSV()">
<span>üìÑ</span> Exportar CSV
</button>
</div>
<div class="table-container">
<table id="topProductsTable">
<thead>
<tr>
<th>Producto</th>
<th>Cantidad Vendida</th>
<th>Costo Total</th>
<th>Ingresos</th>
<th>Ganancia</th>
<th>Margen %</th>
<th>% del Total</th>
</tr>
</thead>
<tbody id="topProductsTableBody">
<tr>
<td colspan="7" style="text-align: center; color: #666;">No hay datos de ventas</td>
</tr>
</tbody>
</table>
</div>
</div>

<div style="margin-top: 40px;">
<h3>An√°lisis de Ganancias por Categor√≠a</h3>
<div class="table-container">
<table id="categoryProfitTable">
<thead>
<tr>
<th>Categor√≠a</th>
<th>Productos Vendidos</th>
<th>Costo Total</th>
<th>Ingresos</th>
<th>Ganancia</th>
<th>Margen %</th>
</tr>
</thead>
<tbody id="categoryProfitTableBody">
<tr>
<td colspan="6" style="text-align: center; color: #666;">No hay datos de ventas</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>

<section id="settings" class="section">
<h2>Configuraci√≥n</h2>

<div style="margin-bottom: 30px;">
<h3>Informaci√≥n del Negocio</h3>
<div class="form-grid">
<div class="form-group">
<label for="businessName">Nombre del Negocio:</label>
<input type="text" id="businessName" placeholder="Mi Negocio">
</div>
<div class="form-group">
<label for="businessAddress">Direcci√≥n:</label>
<input type="text" id="businessAddress" placeholder="Direcci√≥n completa">
</div>
<div class="form-group">
<label for="businessPhone">Tel√©fono:</label>
<input type="tel" id="businessPhone" placeholder="+54 11 1234-5678">
</div>
<div class="form-group">
<label for="businessEmail">Email:</label>
<input type="email" id="businessEmail" placeholder="contacto@minegocio.com">
</div>
</div>
<button class="btn btn-primary" onclick="saveBusinessInfo()">
<span>üíæ</span> Guardar Informaci√≥n
</button>
</div>

<div style="margin-bottom: 30px;">
<h3>Gesti√≥n de Datos</h3>
<div class="form-actions">
<button class="btn btn-primary" onclick="exportData()">
<span>üìÑ</span> Exportar Datos JSON
</button>
<button class="btn btn-info" onclick="exportMssBiJson()">
<span>üìà</span> Exportar MSS BI
</button>
<button class="btn btn-warning" onclick="importData()">
<span>üì•</span> Importar Datos
</button>
<button class="btn btn-info" onclick="manualBackup()">
<span>‚òÅÔ∏è</span> Backup Manual
</button>
<button class="btn btn-success" onclick="restoreFromFirebase()">
<span>üì•</span> Restaurar desde Firebase
</button>
</div>
</div>

<div style="margin-bottom: 30px;">
<h3>Configuraci√≥n de Backup</h3>
<div class="form-group">
<label for="backupInterval">Intervalo de Backup Autom√°tico:</label>
<select id="backupInterval">
<option value="1">Cada 1 hora</option>
<option value="6">Cada 6 horas</option>
<option value="12" selected>Cada 12 horas</option>
<option value="24">Cada 24 horas</option>
</select>
</div>
<button class="btn btn-primary" onclick="saveBackupSettings()">
<span>üíæ</span> Guardar Configuraci√≥n
</button>
</div>

<div style="margin-bottom: 30px;">
<h3>Historial de Backups</h3>
<div class="table-container">
<table id="backupHistoryTable">
<thead>
<tr>
<th>Fecha</th>
<th>Tipo</th>
<th>Estado</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="backupHistoryTableBody">
<tr>
<td colspan="4" style="text-align: center; color: #666;">No hay backups registrados</td>
</tr>
</tbody>
</table>
</div>
</div>

<div>
<h3>Configuraci√≥n del Sistema</h3>
<div class="form-group">
<label>
<input type="checkbox" id="autoSave" checked> Guardado autom√°tico en Firebase
</label>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="showAnimations" checked> Mostrar animaciones
</label>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="lowStockNotifications" checked> Notificaciones de stock bajo
</label>
</div>
</div>
</section>
</div>
</div>

<div id="priceUpdateModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closePriceUpdateModal()">&times;</span>
<h2>üí∞ Actualizaci√≥n Masiva de Precios</h2>

<div class="price-update-grid">
<div class="form-group">
<label for="priceUpdateCategory">Categor√≠a:</label>
<select id="priceUpdateCategory">
<option value="">Todas las categor√≠as</option>
</select>
</div>
<div class="form-group">
<label for="priceUpdateType">Tipo de Actualizaci√≥n:</label>
<select id="priceUpdateType">
<option value="percentage">Porcentaje (%)</option>
<option value="fixed">Monto Fijo ($)</option>
</select>
</div>
<div class="form-group">
<label for="priceUpdateValue">Valor:</label>
<input type="number" id="priceUpdateValue" step="0.01" placeholder="0">
</div>
</div>

<div class="form-actions">
<button class="btn btn-info" onclick="previewPriceUpdate()">
<span>üëÅÔ∏è</span> Vista Previa
</button>
<button class="btn btn-success" onclick="applyPriceUpdate()" id="applyPriceBtn" disabled>
<span>‚úÖ</span> Aplicar Cambios
</button>
</div>

<div id="pricePreviewContainer" style="margin-top: 20px; display: none;">
<h4>Vista Previa de Cambios:</h4>
<div class="price-preview">
<table>
<thead>
<tr>
<th>Producto</th>
<th>Precio Actual</th>
<th>Precio Nuevo</th>
<th>Cambio</th>
</tr>
</thead>
<tbody id="pricePreviewBody"></tbody>
</table>
</div>
</div>
</div>
</div>

<div id="barcodeLabelsModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeBarcodeLabelsModal()">&times;</span>
<h2>üè∑Ô∏è Generar Etiquetas con C√≥digos de Barras</h2>

<div class="form-group">
<label for="labelProducts">Seleccionar Productos:</label>
<div style="max-height: 200px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px;">
<div id="labelProductsList"></div>
</div>
</div>

<div class="price-update-grid">
<div class="form-group">
<label for="labelSize">Tama√±o de Etiqueta:</label>
<select id="labelSize">
<option value="small">Peque√±a (4x2 cm)</option>
<option value="medium" selected>Mediana (6x3 cm)</option>
<option value="large">Grande (8x4 cm)</option>
</select>
</div>
<div class="form-group">
<label for="labelsPerRow">Etiquetas por Fila:</label>
<select id="labelsPerRow">
<option value="2">2</option>
<option value="3" selected>3</option>
<option value="4">4</option>
</select>
</div>
</div>

<div class="form-actions">
<button class="btn btn-primary" onclick="generateBarcodeLabels()">
<span>üè∑Ô∏è</span> Generar PDF
</button>
</div>
</div>
</div>

<div id="saleDetailModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeSaleDetail()">&times;</span>
<h2>Detalle de Venta</h2>
<div id="saleDetailContent"></div>
</div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>